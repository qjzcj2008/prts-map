{"version":3,"sources":["webpack:///./routes/backup/index.js","webpack:///./routes/backup/style.css"],"names":["ArkDataBackup","_ref","state","load","code_ref","useRef","copy_state","setCopyState","useState","load_state","setLoadState","load_error","setLoadError","useEffect","h","class","style","wrapper","info","href","data_area","ref","save_data","name","id","cols","rows","value","JSON","stringify","_objectSpread","buttons","onClick","e","current","select","document","execCommand","err","console","error","copyData","input_value","details","setTimeout","loadData","clear_data","onDblClick","preventDefault","window","localStorage","removeItem","CONFIG_STORAGE_KEY","SAVE_STORAGE_KEY","location","reload","module","exports"],"mappings":"s1BAwFeA,UAjFOC,IAGhB,IAHiBC,MACtBA,EADsBC,KAEtBA,GACKF,EACCG,EAAWC,YAAO,OACjBC,EAAYC,GAAgBC,YAAS,OACrCC,EAAYC,GAAgBF,YAAS,OACrCG,EAAYC,GAAgBJ,YAAS,MAE5CK,YAAU,KACTV,KACE,IA6BH,OACCW,EAAA,OAAKC,MAAOC,IAAMC,SACjBH,EAAA,OAAKC,MAAOC,IAAME,MACjBJ,EAAA,UAAIA,EAAA,KAAGK,KAAK,+BAAR,uBACJL,EAAA,WACAA,EAAA,kBACAA,EAAA,OAAKC,MAAOC,IAAMI,WACjBN,EAAA,YACCO,IAAKjB,EACLW,MAAOC,IAAMM,UACbC,KAAK,OACLC,GAAG,GACHC,KAAK,OAAOC,KAAK,OACjBC,MAAOC,KAAKC,UAALC,EAAA,GACH5B,MAGLY,EAAA,OAAKC,MAAOC,IAAMe,SACjBjB,EAAA,QAAMkB,QAASC,IA7CFA,MACjB7B,EAAS8B,SAAW9B,EAAS8B,QAAQC,SACrC,IACCC,SAASC,YAAY,QACrB9B,EAAa,OACZ,MAAO+B,GACRC,QAAQC,MAAMF,GACd/B,EAAa,QAsCUkC,IAAcnC,GAClCQ,EAAA,QAAMkB,QAASC,IAnCFA,MACjB,GAAI7B,EAAS8B,QAAS,CACrB,IAAIQ,EAActC,EAAS8B,QAAQP,MACnC,IACCxB,EAAKC,EAAS8B,QAAQP,OACtBjB,EAAa,MACZ,MAAO4B,GACRlC,EAAS8B,QAAQP,MAAQe,EACzBH,QAAQC,MAAMF,GACd1B,EAAa0B,EAAIK,SACjBjC,EAAa,MAEdkC,WAAW,IAAMlC,EAAa,MAAO,OAuBdmC,IAAcpC,KAInCE,GACCG,EAAA,OAAKC,MAAOC,IAAML,YAAaA,GAGjCG,EAAA,OACCC,MAAOC,IAAM8B,WACbC,WAAYd,IACXA,EAAEe,iBACFC,OAAOC,aAAaC,WAAWC,KAC/BH,OAAOC,aAAaC,WAAWE,KAC/BJ,OAAOK,SAASC,WANlB,yDCzEJC,EAAAC,QAAA,CAAkBxC,QAAA,iBAAAC,KAAA,cAAAE,UAAA,mBAAAW,QAAA,iBAAAT,UAAA,mBAAAwB,WAAA,oBAAAnC,WAAA","file":"route-backup.chunk.83ac2.esm.js","sourcesContent":["import React from 'preact';\r\nimport { useState, useEffect, useRef } from 'preact/hooks';\r\nimport style from './style';\r\n\r\nimport { STORAGE_KEY as SAVE_STORAGE_KEY } from '../../models/useData';\r\nimport { STORAGE_KEY as CONFIG_STORAGE_KEY } from '../../config/useConfig';\r\n\r\nconst ArkDataBackup = ({\r\n\tstate,\r\n\tload,\r\n}) => {\r\n\tconst code_ref = useRef(null);\r\n\tconst [copy_state, setCopyState] = useState('复制');\r\n\tconst [load_state, setLoadState] = useState('读取');\r\n\tconst [load_error, setLoadError] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tload();\r\n\t}, []);\r\n\r\n\tconst copyData = (e) => {\r\n\t\tcode_ref.current && code_ref.current.select();\r\n\t\ttry {\r\n\t\t\tdocument.execCommand('copy');\r\n\t\t\tsetCopyState('已复制');\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(err);\r\n\t\t\tsetCopyState('失败');\r\n\t\t}\r\n\t};\r\n\r\n\tconst loadData = (e) => {\r\n\t\tif (code_ref.current) {\r\n\t\t\tlet input_value = code_ref.current.value;\r\n\t\t\ttry {\r\n\t\t\t\tload(code_ref.current.value);\r\n\t\t\t\tsetLoadState('成功');\r\n\t\t\t} catch (err) {\r\n\t\t\t\tcode_ref.current.value = input_value;\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t\tsetLoadError(err.details);\r\n\t\t\t\tsetLoadState('失败');\r\n\t\t\t}\r\n\t\t\tsetTimeout(() => setLoadState('读取'), 1000);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div class={style.wrapper}>\r\n\t\t\t<div class={style.info}>\r\n\t\t\t\t<h1><a href=\"https://map.ark-nights.com/\">Map.ARK-NIGHTS.com</a></h1>\r\n\t\t\t\t<hr />\r\n\t\t\t\t<h2>数据备份</h2>\r\n\t\t\t\t<div class={style.data_area}>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tref={code_ref}\r\n\t\t\t\t\t\tclass={style.save_data}\r\n\t\t\t\t\t\tname=\"save\"\r\n\t\t\t\t\t\tid=\"\"\r\n\t\t\t\t\t\tcols=\"auto\" rows=\"auto\"\r\n\t\t\t\t\t\tvalue={JSON.stringify({\r\n\t\t\t\t\t\t\t...state,\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div class={style.buttons}>\r\n\t\t\t\t\t\t<span onClick={e => copyData(e)}>{copy_state}</span>\r\n\t\t\t\t\t\t<span onClick={e => loadData(e)}>{load_state}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tload_error && (\r\n\t\t\t\t\t\t<div class={style.load_error}>{load_error}</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass={style.clear_data}\r\n\t\t\t\t\tonDblClick={e => {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\twindow.localStorage.removeItem(CONFIG_STORAGE_KEY);\r\n\t\t\t\t\t\twindow.localStorage.removeItem(SAVE_STORAGE_KEY);\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>双击清除所有数据</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ArkDataBackup;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"wrapper__27svh\",\"info\":\"info__3a_oA\",\"data_area\":\"data_area__VpsCM\",\"buttons\":\"buttons__WdeXn\",\"save_data\":\"save_data__1fsJb\",\"clear_data\":\"clear_data__3Xd9M\",\"load_error\":\"load_error__1BAJc\"};"],"sourceRoot":""}